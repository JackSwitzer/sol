#!/usr/bin/env bash
# Sol Sunrise Alarm - Terminal UI
# Run with: ./sol-ink
# Run stage review with: ./sol-ink stages

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

cd "$SCRIPT_DIR" || exit 1

# Check if node_modules exists, if not install
if [ ! -d "node_modules" ]; then
  echo "Installing dependencies..."
  bun install
fi

# Check for stages argument
if [ "$1" = "stages" ]; then
  exec bun run tools/stage-review.tsx
fi

# Run the main app
exec bun run src/index.tsx "$@"
